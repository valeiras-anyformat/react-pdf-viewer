"use strict";var e=require("@react-pdf-viewer/core");function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(require("react"));const o=()=>n.createElement(e.Icon,{size:16},n.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),n.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"})),a=({onClick:t})=>{const{l10n:a}=n.useContext(e.LocalizationContext),r=a&&a.download?a.download.download:"Download";return n.createElement(e.Tooltip,{ariaControlsSuffix:"get-file",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaLabel:r,testId:"get-file__download-button",onClick:t},n.createElement(o,null)),content:()=>r})},r=(e,t)=>{const n=document.createElement("a");n.style.display="none",n.href=e,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)},l=(e,t,n)=>{const o=URL.createObjectURL(new Blob([e],{type:n}));r(o,t),o&&URL.revokeObjectURL(o)},i=(e,t)=>{e.getData().then((e=>{/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?l(e,t,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?r(`data:application/pdf;base64,${(e=>btoa(Array(e.length).fill("").map(((t,n)=>String.fromCharCode(e[n]))).join("")))(e)}`,t):l(e,t,"application/pdf")}))},c=({children:e,fileNameGenerator:t,store:o})=>{const[r,l]=n.useState(o.get("file")),[c,d]=n.useState(o.get("doc")),s=e=>{d(e)},u=e=>{l(e)};n.useEffect((()=>(o.subscribe("doc",s),o.subscribe("file",u),()=>{o.subscribe("doc",s),o.unsubscribe("file",u)})),[]);return(e||(e=>n.createElement(a,{onClick:e.onClick})))({onClick:()=>{c&&r&&i(c,t(r))}})},d=({onClick:t})=>{const{l10n:a}=n.useContext(e.LocalizationContext),r=a&&a.download?a.download.download:"Download";return n.createElement(e.MenuItem,{icon:n.createElement(o,null),testId:"get-file__download-menu",onClick:t},r)};exports.DownloadIcon=o,exports.getFilePlugin=t=>{const o=n.useMemo((()=>e.createStore({})),[]),r=e=>e.name?(e=>{const t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e})(e.name):"document.pdf",l=e=>n.createElement(c,{...e,fileNameGenerator:t&&t.fileNameGenerator||r,store:o});return{onDocumentLoad:e=>{o.update("doc",e.doc),o.update("file",e.file)},Download:l,DownloadButton:()=>n.createElement(l,null,(e=>n.createElement(a,{...e}))),DownloadMenuItem:e=>n.createElement(l,null,(t=>n.createElement(d,{onClick:()=>{t.onClick(),e.onClick()}})))}};
