"use strict";var e=require("@react-pdf-viewer/core");function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(require("react"));const r=()=>n.createElement(e.Icon,{size:16},n.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}));var c="rpv_46d1c694",l="rpv_bee9d35d";const o=e=>{const t=n.useRef(null),r=()=>{const n=t.current;n&&(n.click(),e.get("triggerOpenFile")&&e.update("triggerOpenFile",!1))},c=e=>{e&&r()};return n.useEffect((()=>(e.subscribe("triggerOpenFile",c),()=>{e.unsubscribe("triggerOpenFile",c)})),[]),{inputRef:t,openFile:r}},a=({enableShortcuts:t,store:a,onClick:i})=>{const{l10n:u}=n.useContext(e.LocalizationContext),s=u&&u.open?u.open.openFile:"Open file",{inputRef:p,openFile:m}=o(a),f=t?e.isMac()?"Meta+O":"Ctrl+O":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"open",position:e.Position.BottomCenter,target:n.createElement("div",{className:c},n.createElement("input",{accept:".pdf",className:l,multiple:!1,ref:p,tabIndex:-1,title:"",type:"file",onChange:i}),n.createElement(e.MinimalButton,{ariaKeyShortcuts:f,ariaLabel:s,testId:"open__button",onClick:m},n.createElement(r,null))),content:()=>s})},i=({children:e,enableShortcuts:t,store:r})=>(e||(e=>n.createElement(a,{enableShortcuts:t,store:r,onClick:e.onClick})))({onClick:e=>{const t=e.target.files;if(!t||!t.length)return;const n=r.get("openFile");n&&n(t[0])}}),u=({store:t,onClick:a})=>{const{l10n:i}=n.useContext(e.LocalizationContext),u=i&&i.open?i.open.openFile:"Open file",{inputRef:s,openFile:p}=o(t);return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"open__menu",onClick:p},n.createElement("div",{className:c},n.createElement("input",{accept:".pdf",className:l,multiple:!1,ref:s,tabIndex:-1,title:"",type:"file",onChange:a}),u))},s=({containerRef:t,store:r})=>{const[c,l]=n.useState(t.current);n.useEffect((()=>{t.current!==c&&l(t.current)}),[]);const o=n.useCallback((t=>{if(!c||t.shiftKey||t.altKey||"o"!==t.key)return;(e.isMac()?t.metaKey:t.ctrlKey)&&document.activeElement&&c.contains(document.activeElement)&&(t.preventDefault(),r.update("triggerOpenFile",!0))}),[c]);return n.useEffect((()=>{if(c)return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}}),[c]),n.createElement(n.Fragment,null)};exports.OpenFileIcon=r,exports.openPlugin=t=>{const r=n.useMemo((()=>Object.assign({},{enableShortcuts:!0},t)),[]),c=n.useMemo((()=>e.createStore({})),[]),l=e=>n.createElement(i,{enableShortcuts:r.enableShortcuts,...e,store:c});return{install:e=>{c.update("openFile",e.openFile)},renderViewer:e=>{const{slot:t}=e,l={children:n.createElement(n.Fragment,null,r.enableShortcuts&&n.createElement(s,{containerRef:e.containerRef,store:c}),t.children)};return{...t,...l}},Open:l,OpenButton:()=>n.createElement(l,null),OpenMenuItem:()=>n.createElement(l,null,(e=>n.createElement(u,{store:c,onClick:e.onClick})))}};
