"use strict";var e=require("@react-pdf-viewer/core");function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var o=t(require("react"));const n=()=>o.createElement(e.Icon,{ignoreDirection:!0,size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10\n            M10.5,5.499v10"})),r=()=>o.createElement(e.Icon,{ignoreDirection:!0,size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10"})),c=e=>{const[t,n]=o.useState(e.get("scale")||0),r=e=>{n(e)};return o.useEffect((()=>(e.subscribe("scale",r),()=>{e.unsubscribe("scale",r)})),[]),{scale:t}},a=({children:e,store:t})=>{const{scale:n}=c(t);return(e||(e=>o.createElement(o.Fragment,null,`${Math.round(100*e.scale)}%`)))({scale:n})},l={passive:!1};let s;const i=({pagesContainerRef:t,store:n})=>{const r=e.useDebounceCallback((e=>{const t=n.get("zoom");t&&t(e)}),40),c=e=>{if(!e.ctrlKey)return;e.preventDefault();const t=e.target.getBoundingClientRect(),o=1-e.deltaY/100,c=e.clientX-t.left,a=e.clientY-t.top,l=n.get("scale"),i=(s||(s=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(c,a).scale(o).translate(-c,-a).scale(l);r(i.a)};return e.useIsomorphicLayoutEffect((()=>{const e=t.current;if(e)return e.addEventListener("wheel",c,l),()=>{e.removeEventListener("wheel",c)}}),[]),o.createElement(o.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],u=e=>m.find((t=>t>e))||e,E=e=>{const t=m.findIndex((t=>t>=e));return-1===t||0===t?e:m[t-1]},z=({containerRef:t,store:n})=>{const[r,c]=o.useState(t.current);o.useEffect((()=>{t.current!==r&&c(t.current)}),[]);const a=o.useCallback((t=>{if(!r||t.shiftKey||t.altKey)return;if(!(e.isMac()?t.metaKey:t.ctrlKey))return;if(!document.activeElement||!r.contains(document.activeElement))return;const o=n.get("zoom");if(!o)return;const c=n.get("scale")||1;let a=1;switch(t.key){case"-":a=E(c);break;case"=":a=u(c);break;case"0":a=1;break;default:a=c}a!==c&&(t.preventDefault(),o(a))}),[r]);return o.useEffect((()=>{if(r)return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}}),[r]),o.createElement(o.Fragment,null)};var d="rpv_97efec6c",f="rpv_40d5565b",p="rpv_40d56cdb",C="rpv_3e2b1ce";const g=[.5,.75,1,1.25,1.5,2,3,4],h=({levels:t=g,scale:n,onZoom:r})=>{const{l10n:c}=o.useContext(e.LocalizationContext),{direction:a}=o.useContext(e.ThemeContext),l=a===e.TextDirection.RightToLeft,s=c&&c.zoom?c.zoom.zoomDocument:"Zoom document";return o.createElement(e.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e.Position.BottomCenter,target:t=>o.createElement(e.MinimalButton,{ariaLabel:s,testId:"zoom__popover-target",onClick:()=>{t()}},o.createElement("span",{className:d},o.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e.classNames({[f]:!l,[p]:l})},Math.round(100*n),"%"),o.createElement("span",{className:C}))),content:n=>o.createElement(e.Menu,null,Object.keys(e.SpecialZoomLevel).map((t=>{const a=t;return o.createElement(e.MenuItem,{key:a,onClick:()=>{n(),r(a)}},(t=>{switch(t){case e.SpecialZoomLevel.ActualSize:return c&&c.zoom?c.zoom.actualSize:"Actual size";case e.SpecialZoomLevel.PageFit:return c&&c.zoom?c.zoom.pageFit:"Page fit";case e.SpecialZoomLevel.PageWidth:return c&&c.zoom?c.zoom.pageWidth:"Page width"}})(a))})),o.createElement(e.MenuDivider,null),t.map((t=>o.createElement(e.MenuItem,{key:t,onClick:()=>{n(),r(t)}},`${Math.round(100*t)}%`)))),closeOnClickOutside:!0,closeOnEscape:!0})},b=({children:e,levels:t,store:n})=>{const{scale:r}=c(n);return(e||(e=>o.createElement(h,{levels:t,scale:e.scale,onZoom:e.onZoom})))({scale:r,onZoom:e=>{const t=n.get("zoom");t&&t(e)}})},v=({enableShortcuts:t,onClick:r})=>{const{l10n:c}=o.useContext(e.LocalizationContext),a=c&&c.zoom?c.zoom.zoomIn:"Zoom in",l=t?e.isMac()?"Meta+=":"Ctrl+=":"";return o.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-in",position:e.Position.BottomCenter,target:o.createElement(e.MinimalButton,{ariaKeyShortcuts:l,ariaLabel:a,testId:"zoom__in-button",onClick:r},o.createElement(n,null)),content:()=>a})},k=({children:e,enableShortcuts:t,store:o})=>{const{scale:n}=c(o);return(e||v)({enableShortcuts:t,onClick:()=>{const e=o.get("zoom");if(e){e(u(n))}}})},S=({onClick:t})=>{const{l10n:r}=o.useContext(e.LocalizationContext),c=r&&r.zoom?r.zoom.zoomIn:"Zoom in";return o.createElement(e.MenuItem,{icon:o.createElement(n,null),testId:"zoom__in-menu",onClick:t},c)},M=({enableShortcuts:t,onClick:n})=>{const{l10n:c}=o.useContext(e.LocalizationContext),a=c&&c.zoom?c.zoom.zoomOut:"Zoom out",l=t?e.isMac()?"Meta+-":"Ctrl+-":"";return o.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-out",position:e.Position.BottomCenter,target:o.createElement(e.MinimalButton,{ariaKeyShortcuts:l,ariaLabel:a,testId:"zoom__out-button",onClick:n},o.createElement(r,null)),content:()=>a})},I=({children:e,enableShortcuts:t,store:o})=>{const{scale:n}=c(o);return(e||M)({enableShortcuts:t,onClick:()=>{const e=o.get("zoom");if(e){e(E(n))}}})},Z=({onClick:t})=>{const{l10n:n}=o.useContext(e.LocalizationContext),c=n&&n.zoom?n.zoom.zoomOut:"Zoom out";return o.createElement(e.MenuItem,{icon:o.createElement(r,null),testId:"zoom__out-menu",onClick:t},c)};exports.ZoomInIcon=n,exports.ZoomOutIcon=r,exports.zoomPlugin=t=>{const n=o.useMemo((()=>Object.assign({},{enableShortcuts:!0},t)),[]),r=o.useMemo((()=>e.createStore({})),[]),c=e=>o.createElement(k,{enableShortcuts:n.enableShortcuts,...e,store:r}),l=e=>o.createElement(I,{enableShortcuts:n.enableShortcuts,...e,store:r}),s=e=>o.createElement(b,{...e,store:r});return{renderViewer:e=>{const{slot:t}=e;if(!n.enableShortcuts)return t;const c={children:o.createElement(o.Fragment,null,o.createElement(z,{containerRef:e.containerRef,store:r}),o.createElement(i,{pagesContainerRef:e.pagesContainerRef,store:r}),t.children)};return{...t,...c}},install:e=>{r.update("zoom",e.zoom)},onViewerStateChange:e=>(r.update("scale",e.scale),e),zoomTo:e=>{const t=r.get("zoom");t&&t(e)},CurrentScale:e=>o.createElement(a,{...e,store:r}),ZoomIn:c,ZoomInButton:()=>o.createElement(c,null,(e=>o.createElement(v,{...e}))),ZoomInMenuItem:e=>o.createElement(c,null,(t=>o.createElement(S,{onClick:()=>{t.onClick(),e.onClick()}}))),ZoomOut:l,ZoomOutButton:()=>o.createElement(l,null,(e=>o.createElement(M,{...e}))),ZoomOutMenuItem:e=>o.createElement(l,null,(t=>o.createElement(Z,{onClick:()=>{t.onClick(),e.onClick()}}))),Zoom:s,ZoomPopover:e=>o.createElement(s,null,(t=>o.createElement(h,{levels:e?.levels,...t})))}};
